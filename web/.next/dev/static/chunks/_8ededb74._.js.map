{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/components/markdown-view.tsx"],"sourcesContent":["import ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport rehypeSanitize from \"rehype-sanitize\";\n\ninterface MarkdownViewProps {\n  content: string;\n}\n\nexport default function MarkdownView({ content }: MarkdownViewProps) {\n  if (!content.trim()) {\n    return <p className=\"muted\">(empty)</p>;\n  }\n\n  return (\n    <div className=\"markdown-shell\" data-testid=\"markdown-view\">\n      <ReactMarkdown remarkPlugins={[remarkGfm]} rehypePlugins={[rehypeSanitize]}>\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAMe,SAAS,aAAa,EAAE,OAAO,EAAqB;IACjE,IAAI,CAAC,QAAQ,IAAI,IAAI;QACnB,qBAAO,6LAAC;YAAE,WAAU;sBAAQ;;;;;;IAC9B;IAEA,qBACE,6LAAC;QAAI,WAAU;QAAiB,eAAY;kBAC1C,cAAA,6LAAC,sMAAa;YAAC,eAAe;gBAAC,2JAAS;aAAC;YAAE,eAAe;gBAAC,gKAAc;aAAC;sBACvE;;;;;;;;;;;AAIT;KAZwB"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/lib/browser-mode.ts"],"sourcesContent":["import { BrowserMode } from \"@/lib/types\";\n\nconst CHROME_PATTERN = /(Chrome|CriOS)/i;\nconst EDGE_PATTERN = /(Edg|EdgiOS|EdgA)/i;\n\nexport const isFileSystemAccessSupported = () =>\n  typeof window !== \"undefined\" &&\n  typeof window.showDirectoryPicker === \"function\";\n\nconst extractMajorVersion = (ua: string, token: RegExp): number | null => {\n  const match = ua.match(token);\n  if (!match) {\n    return null;\n  }\n  const parts = match[0].split(\"/\");\n  if (parts.length < 2) {\n    return null;\n  }\n  const major = Number.parseInt(parts[1], 10);\n  return Number.isFinite(major) ? major : null;\n};\n\nexport const detectBrowserMode = (): BrowserMode => {\n  if (typeof navigator === \"undefined\") {\n    return \"fallback-readonly\";\n  }\n\n  const ua = navigator.userAgent;\n  const support = isFileSystemAccessSupported();\n\n  if (support && EDGE_PATTERN.test(ua)) {\n    const version = extractMajorVersion(ua, /Edg\\/\\d+/i);\n    if (!version || version >= 109) {\n      return \"edge-full\";\n    }\n  }\n\n  if (support && CHROME_PATTERN.test(ua) && !EDGE_PATTERN.test(ua)) {\n    const version = extractMajorVersion(ua, /(Chrome|CriOS)\\/\\d+/i);\n    if (!version || version >= 109) {\n      return \"chrome-full\";\n    }\n  }\n\n  return \"fallback-readonly\";\n};\n"],"names":[],"mappings":";;;;;;AAEA,MAAM,iBAAiB;AACvB,MAAM,eAAe;AAEd,MAAM,8BAA8B,IACzC,+CAAkB,eAClB,OAAO,OAAO,mBAAmB,KAAK;AAExC,MAAM,sBAAsB,CAAC,IAAY;IACvC,MAAM,QAAQ,GAAG,KAAK,CAAC;IACvB,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IACA,MAAM,QAAQ,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC;IAC7B,IAAI,MAAM,MAAM,GAAG,GAAG;QACpB,OAAO;IACT;IACA,MAAM,QAAQ,OAAO,QAAQ,CAAC,KAAK,CAAC,EAAE,EAAE;IACxC,OAAO,OAAO,QAAQ,CAAC,SAAS,QAAQ;AAC1C;AAEO,MAAM,oBAAoB;IAC/B,IAAI,OAAO,cAAc,aAAa;QACpC,OAAO;IACT;IAEA,MAAM,KAAK,UAAU,SAAS;IAC9B,MAAM,UAAU;IAEhB,IAAI,WAAW,aAAa,IAAI,CAAC,KAAK;QACpC,MAAM,UAAU,oBAAoB,IAAI;QACxC,IAAI,CAAC,WAAW,WAAW,KAAK;YAC9B,OAAO;QACT;IACF;IAEA,IAAI,WAAW,eAAe,IAAI,CAAC,OAAO,CAAC,aAAa,IAAI,CAAC,KAAK;QAChE,MAAM,UAAU,oBAAoB,IAAI;QACxC,IAAI,CAAC,WAAW,WAAW,KAAK;YAC9B,OAAO;QACT;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/lib/config-validation.ts"],"sourcesContent":["import Ajv from \"ajv\";\nimport YAML from \"yaml\";\n\nconst schema = {\n  type: \"object\",\n  properties: {\n    staleDays: { type: \"number\", minimum: 1 },\n    backupRetentionDays: { type: \"number\", minimum: 1 },\n    language: { enum: [\"zh-TW\", \"en\"] },\n    theme: { enum: [\"light\", \"dark\"] },\n  },\n  additionalProperties: true,\n};\n\nconst ajv = new Ajv({ allErrors: true, strict: false });\nconst validate = ajv.compile(schema);\n\nexport interface ConfigValidationResult {\n  valid: boolean;\n  errors: string[];\n  lintHints: string[];\n  parsed: Record<string, unknown> | null;\n}\n\nexport const validateConfigYaml = (raw: string): ConfigValidationResult => {\n  if (!raw.trim()) {\n    return {\n      valid: false,\n      errors: [\"config.yaml is empty\"],\n      lintHints: [\"Add at least one key-value pair\"],\n      parsed: null,\n    };\n  }\n\n  try {\n    const parsed = YAML.parse(raw) as Record<string, unknown>;\n    const valid = validate(parsed);\n    const errors = valid\n      ? []\n      : (validate.errors ?? []).map((error) => {\n          const location = error.instancePath || \"root\";\n          return `${location}: ${error.message ?? \"invalid value\"}`;\n        });\n\n    const lintHints: string[] = [];\n    if (typeof parsed.staleDays !== \"number\") {\n      lintHints.push(\"Recommend setting numeric staleDays\");\n    }\n    if (typeof parsed.backupRetentionDays !== \"number\") {\n      lintHints.push(\"Recommend setting numeric backupRetentionDays\");\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors,\n      lintHints,\n      parsed,\n    };\n  } catch (error) {\n    return {\n      valid: false,\n      errors: [error instanceof Error ? error.message : \"Invalid YAML\"],\n      lintHints: [\"Fix YAML syntax before saving\"],\n      parsed: null,\n    };\n  }\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS;IACb,MAAM;IACN,YAAY;QACV,WAAW;YAAE,MAAM;YAAU,SAAS;QAAE;QACxC,qBAAqB;YAAE,MAAM;YAAU,SAAS;QAAE;QAClD,UAAU;YAAE,MAAM;gBAAC;gBAAS;aAAK;QAAC;QAClC,OAAO;YAAE,MAAM;gBAAC;gBAAS;aAAO;QAAC;IACnC;IACA,sBAAsB;AACxB;AAEA,MAAM,MAAM,IAAI,gJAAG,CAAC;IAAE,WAAW;IAAM,QAAQ;AAAM;AACrD,MAAM,WAAW,IAAI,OAAO,CAAC;AAStB,MAAM,qBAAqB,CAAC;IACjC,IAAI,CAAC,IAAI,IAAI,IAAI;QACf,OAAO;YACL,OAAO;YACP,QAAQ;gBAAC;aAAuB;YAChC,WAAW;gBAAC;aAAkC;YAC9C,QAAQ;QACV;IACF;IAEA,IAAI;QACF,MAAM,SAAS,sKAAI,CAAC,KAAK,CAAC;QAC1B,MAAM,QAAQ,SAAS;QACvB,MAAM,SAAS,QACX,EAAE,GACF,CAAC,SAAS,MAAM,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC;YAC3B,MAAM,WAAW,MAAM,YAAY,IAAI;YACvC,OAAO,GAAG,SAAS,EAAE,EAAE,MAAM,OAAO,IAAI,iBAAiB;QAC3D;QAEJ,MAAM,YAAsB,EAAE;QAC9B,IAAI,OAAO,OAAO,SAAS,KAAK,UAAU;YACxC,UAAU,IAAI,CAAC;QACjB;QACA,IAAI,OAAO,OAAO,mBAAmB,KAAK,UAAU;YAClD,UAAU,IAAI,CAAC;QACjB;QAEA,OAAO;YACL,OAAO,OAAO,MAAM,KAAK;YACzB;YACA;YACA;QACF;IACF,EAAE,OAAO,OAAO;QACd,OAAO;YACL,OAAO;YACP,QAAQ;gBAAC,iBAAiB,QAAQ,MAAM,OAAO,GAAG;aAAe;YACjE,WAAW;gBAAC;aAAgC;YAC5C,QAAQ;QACV;IACF;AACF"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/lib/fs-access.ts"],"sourcesContent":["import { detectBrowserMode } from \"@/lib/browser-mode\";\nimport { LoadProgressEvent, ProjectFile, ProjectSnapshot } from \"@/lib/types\";\n\nconst normalize = (path: string) => path.replaceAll(\"\\\\\", \"/\");\n\ntype ProgressCallback = (event: LoadProgressEvent) => void;\n\ninterface ScanState {\n  processed: number;\n  estimated: number;\n  lastPercent: number;\n}\n\nconst emitProgress = (\n  callback: ProgressCallback | undefined,\n  event: LoadProgressEvent\n) => {\n  callback?.(event);\n};\n\nconst nextScanPercent = (state: ScanState): number => {\n  const ratio = state.processed / Math.max(1, state.estimated);\n  const computed = 15 + Math.round(ratio * 55);\n  const bounded = Math.max(state.lastPercent, Math.min(80, computed));\n  state.lastPercent = bounded;\n  return bounded;\n};\n\nconst readDirectoryEntries = async (\n  directoryHandle: FileSystemDirectoryHandle,\n  scanState: ScanState,\n  callback?: ProgressCallback,\n  prefix = \"\"\n): Promise<Record<string, ProjectFile>> => {\n  const files: Record<string, ProjectFile> = {};\n\n  for await (const [name, entry] of directoryHandle.entries()) {\n    scanState.estimated += 1;\n    const currentPath = prefix ? `${prefix}/${name}` : name;\n\n    if (entry.kind === \"file\") {\n      const fileHandle = entry as FileSystemFileHandle;\n      const file = await fileHandle.getFile();\n      files[normalize(currentPath)] = {\n        path: normalize(currentPath),\n        content: await file.text(),\n        lastModified: file.lastModified,\n      };\n      scanState.processed += 1;\n      emitProgress(callback, {\n        stage: \"scanning\",\n        progressPercent: nextScanPercent(scanState),\n        message: \"scan:file\",\n      });\n    }\n\n    if (entry.kind === \"directory\") {\n      const nested = await readDirectoryEntries(\n        entry as FileSystemDirectoryHandle,\n        scanState,\n        callback,\n        currentPath\n      );\n      Object.assign(files, nested);\n      scanState.processed += 1;\n      emitProgress(callback, {\n        stage: \"scanning\",\n        progressPercent: nextScanPercent(scanState),\n        message: \"scan:dir\",\n      });\n    }\n  }\n\n  return files;\n};\n\nconst readDirectoryStamps = async (\n  directoryHandle: FileSystemDirectoryHandle,\n  prefix = \"\"\n): Promise<Record<string, Pick<ProjectFile, \"path\" | \"lastModified\">>> => {\n  const stamps: Record<string, Pick<ProjectFile, \"path\" | \"lastModified\">> = {};\n\n  for await (const [name, entry] of directoryHandle.entries()) {\n    const currentPath = prefix ? `${prefix}/${name}` : name;\n\n    if (entry.kind === \"file\") {\n      const fileHandle = entry as FileSystemFileHandle;\n      const file = await fileHandle.getFile();\n      stamps[normalize(currentPath)] = {\n        path: normalize(currentPath),\n        lastModified: file.lastModified,\n      };\n      continue;\n    }\n\n    if (entry.kind === \"directory\") {\n      const nested = await readDirectoryStamps(\n        entry as FileSystemDirectoryHandle,\n        currentPath\n      );\n      Object.assign(stamps, nested);\n    }\n  }\n\n  return stamps;\n};\n\nconst ensureOpenSpecStructure = (files: Record<string, ProjectFile>) => {\n  const hasOpenSpec = Object.keys(files).some((path) => normalize(path).startsWith(\"openspec/\"));\n  if (!hasOpenSpec) {\n    throw new Error(\"Invalid OpenSpec project: missing openspec/\");\n  }\n};\n\nconst loadDirectoryFiles = async (\n  rootHandle: FileSystemDirectoryHandle,\n  onProgress?: ProgressCallback,\n  progressMessagePrefix = \"open\"\n): Promise<Record<string, ProjectFile>> => {\n  emitProgress(onProgress, {\n    stage: \"scanning\",\n    progressPercent: 15,\n    message: `${progressMessagePrefix}:scanning`,\n  });\n\n  const scanState: ScanState = { processed: 0, estimated: 1, lastPercent: 15 };\n  const files = await readDirectoryEntries(rootHandle, scanState, onProgress);\n\n  emitProgress(onProgress, {\n    stage: \"parsing\",\n    progressPercent: 85,\n    message: `${progressMessagePrefix}:parsing`,\n  });\n\n  ensureOpenSpecStructure(files);\n  return files;\n};\n\nconst getDirectoryHandleByPath = async (\n  root: FileSystemDirectoryHandle,\n  pathSegments: string[]\n): Promise<FileSystemDirectoryHandle> => {\n  let current = root;\n  for (const segment of pathSegments) {\n    current = await current.getDirectoryHandle(segment);\n  }\n  return current;\n};\n\nconst getFileHandleByPath = async (\n  root: FileSystemDirectoryHandle,\n  pathSegments: string[],\n  create: boolean\n): Promise<FileSystemFileHandle> => {\n  if (pathSegments.length === 0) {\n    throw new Error(\"File path cannot be empty\");\n  }\n\n  const fileName = pathSegments[pathSegments.length - 1];\n  const directories = pathSegments.slice(0, -1);\n\n  let current = root;\n  for (const segment of directories) {\n    current = await current.getDirectoryHandle(segment, { create });\n  }\n\n  return current.getFileHandle(fileName, { create });\n};\n\nexport const openDirectoryProject = async (\n  onProgress?: ProgressCallback\n): Promise<ProjectSnapshot> => {\n  if (typeof window.showDirectoryPicker !== \"function\") {\n    throw new Error(\"showDirectoryPicker is not supported\");\n  }\n\n  emitProgress(onProgress, {\n    stage: \"initializing\",\n    progressPercent: 5,\n    message: \"open:initializing\",\n  });\n\n  const rootHandle = await window.showDirectoryPicker({ mode: \"readwrite\" });\n\n  const permission = await rootHandle.requestPermission?.({ mode: \"readwrite\" });\n  const writable = permission === \"granted\";\n\n  const files = await loadDirectoryFiles(rootHandle, onProgress, \"open\");\n\n  return {\n    id: `${rootHandle.name}-${Date.now()}`,\n    name: rootHandle.name,\n    type: \"filesystem\",\n    writable,\n    mode: detectBrowserMode(),\n    files,\n    openedAt: Date.now(),\n    rootHandle,\n  };\n};\n\nexport const reloadDirectoryProject = async (\n  snapshot: Pick<ProjectSnapshot, \"id\" | \"name\" | \"type\" | \"rootHandle\">,\n  onProgress?: ProgressCallback\n): Promise<ProjectSnapshot> => {\n  if (!snapshot.rootHandle) {\n    throw new Error(\"Project root handle is missing\");\n  }\n\n  const permission = await snapshot.rootHandle.queryPermission?.({ mode: \"readwrite\" });\n  const files = await loadDirectoryFiles(snapshot.rootHandle, onProgress, \"sync\");\n\n  return {\n    id: snapshot.id,\n    name: snapshot.name,\n    type: snapshot.type,\n    writable: permission === \"granted\",\n    mode: detectBrowserMode(),\n    files,\n    openedAt: Date.now(),\n    rootHandle: snapshot.rootHandle,\n  };\n};\n\nexport const scanDirectoryFileStamps = async (\n  rootHandle: FileSystemDirectoryHandle\n): Promise<Record<string, Pick<ProjectFile, \"path\" | \"lastModified\">>> =>\n  readDirectoryStamps(rootHandle);\n\nexport const importReadonlyProject = async (\n  fileList: FileList,\n  onProgress?: ProgressCallback\n): Promise<ProjectSnapshot> => {\n  const files: Record<string, ProjectFile> = {};\n  const now = Date.now();\n\n  emitProgress(onProgress, {\n    stage: \"initializing\",\n    progressPercent: 5,\n    message: \"import:initializing\",\n  });\n\n  const list = Array.from(fileList);\n\n  for (let index = 0; index < list.length; index += 1) {\n    const file = list[index];\n    const relativePath = normalize(file.webkitRelativePath || file.name);\n    files[relativePath] = {\n      path: relativePath,\n      content: await file.text(),\n      lastModified: file.lastModified || now,\n    };\n\n    const ratio = (index + 1) / Math.max(1, list.length);\n    emitProgress(onProgress, {\n      stage: \"scanning\",\n      progressPercent: 15 + Math.round(ratio * 65),\n      message: \"import:scanning\",\n    });\n  }\n\n  emitProgress(onProgress, {\n    stage: \"parsing\",\n    progressPercent: 85,\n    message: \"import:parsing\",\n  });\n\n  const hasOpenSpec = Object.keys(files).some((path) => normalize(path).startsWith(\"openspec/\"));\n  if (!hasOpenSpec) {\n    throw new Error(\"Invalid OpenSpec project: missing openspec/\");\n  }\n\n  const first = list[0];\n  const projectName = first?.webkitRelativePath.split(\"/\")[0] || \"imported-project\";\n\n  return {\n    id: `${projectName}-${Date.now()}`,\n    name: projectName,\n    type: \"fallback\",\n    writable: false,\n    mode: \"fallback-readonly\",\n    files,\n    openedAt: now,\n  };\n};\n\nexport const saveTextFile = async (\n  rootHandle: FileSystemDirectoryHandle,\n  path: string,\n  content: string\n) => {\n  const segments = normalize(path).split(\"/\");\n  const fileHandle = await getFileHandleByPath(rootHandle, segments, true);\n  const writable = await fileHandle.createWritable();\n  await writable.write(content);\n  await writable.close();\n};\n\nexport const deleteChangeDirectory = async (\n  rootHandle: FileSystemDirectoryHandle,\n  category: \"in-progress\" | \"archived\",\n  name: string\n) => {\n  const baseSegments =\n    category === \"archived\" ? [\"openspec\", \"changes\", \"archive\"] : [\"openspec\", \"changes\"];\n\n  const parent = await getDirectoryHandleByPath(rootHandle, baseSegments);\n  await parent.removeEntry(name, { recursive: true });\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/lib/i18n.ts"],"sourcesContent":["import { BrowserMode, LoadStage, MainTab } from \"@/lib/types\";\n\ntype Lang = \"zh-TW\" | \"en\";\n\ntype Dict = Record<string, string>;\n\nconst ZH: Dict = {\n  appTitle: \"OpenSpec 專案追蹤面板\",\n  openProject: \"開啟本機專案\",\n  importReadonly: \"匯入資料夾（唯讀）\",\n  recentProjects: \"最近開啟專案\",\n  noRecentProjects: \"尚無最近專案\",\n  currentProject: \"目前開啟專案\",\n  noActiveProject: \"尚未開啟專案\",\n  openTime: \"開啟時間\",\n  delete: \"刪除\",\n  overview: \"總覽\",\n  inProgress: \"進行中\",\n  specs: \"規格\",\n  archived: \"已封存\",\n  stalled: \"停滯中\",\n  configEditor: \"config.yaml 編輯\",\n  save: \"儲存\",\n  saving: \"儲存中...\",\n  validationErrors: \"驗證錯誤\",\n  lintHints: \"Lint 提示\",\n  noSelection: \"請先從清單選擇一個項目。\",\n  proposal: \"提案\",\n  design: \"設計\",\n  tasks: \"任務\",\n  language: \"語言\",\n  theme: \"主題\",\n  dark: \"黑底白字\",\n  light: \"白底黑字\",\n  staleDays: \"停滯天數門檻\",\n  backupRetentionDays: \"備份保留天數\",\n  mode: \"模式\",\n  modeChrome: \"Chrome 完整讀寫\",\n  modeEdge: \"Edge 完整讀寫\",\n  modeFallback: \"Safari/Firefox fallback（匯入與唯讀）\",\n  readonlyHint: \"目前為唯讀模式，部分功能（儲存/刪除）不可用。\",\n  configSaved: \"config.yaml 已儲存\",\n  selectItem: \"點擊上方項目可在此顯示內容\",\n  confirmDelete: \"確定要刪除這個項目嗎？\",\n  cannotDeleteReadonly: \"唯讀模式無法刪除\",\n  openFailed: \"開啟資料夾失敗\",\n  invalidProject: \"此資料夾缺少 openspec/ 結構\",\n  loadProgress: \"載入進度\",\n  syncStatus: \"即時同步\",\n  syncIdle: \"待命中\",\n  syncSyncing: \"同步中\",\n  syncSuccess: \"已同步\",\n  syncError: \"同步失敗\",\n  syncWatching: \"監控中：偵測到檔案更新會自動同步。\",\n  syncFallbackInfo: \"唯讀匯入模式：如本機檔案更新，請重新匯入以同步。\",\n  syncUpdateDetected: \"偵測到檔案更新，正在同步...\",\n  syncUpdated: \"檔案更新已同步。\",\n  syncFailedHint: \"自動同步失敗，已保留最近一次成功資料。\",\n  lastSyncedAt: \"最近同步時間\",\n  stageIdle: \"待命中\",\n  stageInitializing: \"初始化中\",\n  stageScanning: \"掃描檔案中\",\n  stageParsing: \"解析資料中\",\n  stageReady: \"載入完成\",\n  stageError: \"載入失敗\",\n};\n\nconst EN: Dict = {\n  appTitle: \"OpenSpec Project Progress Dashboard\",\n  openProject: \"Open Local Project\",\n  importReadonly: \"Import Folder (Read-only)\",\n  recentProjects: \"Recent Projects\",\n  noRecentProjects: \"No recent projects\",\n  currentProject: \"Current Project\",\n  noActiveProject: \"No active project\",\n  openTime: \"Opened At\",\n  delete: \"Delete\",\n  overview: \"Overview\",\n  inProgress: \"In Progress\",\n  specs: \"Specs\",\n  archived: \"Archived\",\n  stalled: \"Stalled\",\n  configEditor: \"config.yaml Editor\",\n  save: \"Save\",\n  saving: \"Saving...\",\n  validationErrors: \"Validation Errors\",\n  lintHints: \"Lint Hints\",\n  noSelection: \"Select an item from the list first.\",\n  proposal: \"Proposal\",\n  design: \"Design\",\n  tasks: \"Tasks\",\n  language: \"Language\",\n  theme: \"Theme\",\n  dark: \"Dark\",\n  light: \"Light\",\n  staleDays: \"Stale Days Threshold\",\n  backupRetentionDays: \"Backup Retention Days\",\n  mode: \"Mode\",\n  modeChrome: \"Chrome Full Read/Write\",\n  modeEdge: \"Edge Full Read/Write\",\n  modeFallback: \"Safari/Firefox Fallback (Import + Read-only)\",\n  readonlyHint: \"Read-only mode: save/delete actions are disabled.\",\n  configSaved: \"config.yaml saved\",\n  selectItem: \"Click an item above to show content here\",\n  confirmDelete: \"Delete this item?\",\n  cannotDeleteReadonly: \"Delete is disabled in read-only mode\",\n  openFailed: \"Failed to open folder\",\n  invalidProject: \"This folder is missing openspec/ structure\",\n  loadProgress: \"Load Progress\",\n  syncStatus: \"Live Sync\",\n  syncIdle: \"Idle\",\n  syncSyncing: \"Syncing\",\n  syncSuccess: \"Synced\",\n  syncError: \"Sync Failed\",\n  syncWatching: \"Watching files: changes sync automatically.\",\n  syncFallbackInfo: \"Read-only import mode: re-import to sync external file changes.\",\n  syncUpdateDetected: \"File updates detected, syncing...\",\n  syncUpdated: \"File changes synced.\",\n  syncFailedHint: \"Auto-sync failed. Keeping last successful data.\",\n  lastSyncedAt: \"Last Synced At\",\n  stageIdle: \"Idle\",\n  stageInitializing: \"Initializing\",\n  stageScanning: \"Scanning files\",\n  stageParsing: \"Parsing data\",\n  stageReady: \"Ready\",\n  stageError: \"Failed\",\n};\n\nconst TABLE: Record<Lang, Dict> = {\n  \"zh-TW\": ZH,\n  en: EN,\n};\n\nexport const t = (lang: Lang, key: string): string => TABLE[lang][key] ?? key;\n\nexport const tabLabel = (lang: Lang, tab: MainTab): string => {\n  if (tab === \"in-progress\") {\n    return t(lang, \"inProgress\");\n  }\n  return t(lang, tab);\n};\n\nexport const modeLabel = (lang: Lang, mode: BrowserMode): string => {\n  if (mode === \"chrome-full\") {\n    return t(lang, \"modeChrome\");\n  }\n  if (mode === \"edge-full\") {\n    return t(lang, \"modeEdge\");\n  }\n  return t(lang, \"modeFallback\");\n};\n\nexport const stageLabel = (lang: Lang, stage: LoadStage): string => {\n  if (stage === \"initializing\") {\n    return t(lang, \"stageInitializing\");\n  }\n  if (stage === \"scanning\") {\n    return t(lang, \"stageScanning\");\n  }\n  if (stage === \"parsing\") {\n    return t(lang, \"stageParsing\");\n  }\n  if (stage === \"ready\") {\n    return t(lang, \"stageReady\");\n  }\n  if (stage === \"error\") {\n    return t(lang, \"stageError\");\n  }\n  return t(lang, \"stageIdle\");\n};\n"],"names":[],"mappings":";;;;;;;;;;AAMA,MAAM,KAAW;IACf,UAAU;IACV,aAAa;IACb,gBAAgB;IAChB,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,iBAAiB;IACjB,UAAU;IACV,QAAQ;IACR,UAAU;IACV,YAAY;IACZ,OAAO;IACP,UAAU;IACV,SAAS;IACT,cAAc;IACd,MAAM;IACN,QAAQ;IACR,kBAAkB;IAClB,WAAW;IACX,aAAa;IACb,UAAU;IACV,QAAQ;IACR,OAAO;IACP,UAAU;IACV,OAAO;IACP,MAAM;IACN,OAAO;IACP,WAAW;IACX,qBAAqB;IACrB,MAAM;IACN,YAAY;IACZ,UAAU;IACV,cAAc;IACd,cAAc;IACd,aAAa;IACb,YAAY;IACZ,eAAe;IACf,sBAAsB;IACtB,YAAY;IACZ,gBAAgB;IAChB,cAAc;IACd,YAAY;IACZ,UAAU;IACV,aAAa;IACb,aAAa;IACb,WAAW;IACX,cAAc;IACd,kBAAkB;IAClB,oBAAoB;IACpB,aAAa;IACb,gBAAgB;IAChB,cAAc;IACd,WAAW;IACX,mBAAmB;IACnB,eAAe;IACf,cAAc;IACd,YAAY;IACZ,YAAY;AACd;AAEA,MAAM,KAAW;IACf,UAAU;IACV,aAAa;IACb,gBAAgB;IAChB,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,iBAAiB;IACjB,UAAU;IACV,QAAQ;IACR,UAAU;IACV,YAAY;IACZ,OAAO;IACP,UAAU;IACV,SAAS;IACT,cAAc;IACd,MAAM;IACN,QAAQ;IACR,kBAAkB;IAClB,WAAW;IACX,aAAa;IACb,UAAU;IACV,QAAQ;IACR,OAAO;IACP,UAAU;IACV,OAAO;IACP,MAAM;IACN,OAAO;IACP,WAAW;IACX,qBAAqB;IACrB,MAAM;IACN,YAAY;IACZ,UAAU;IACV,cAAc;IACd,cAAc;IACd,aAAa;IACb,YAAY;IACZ,eAAe;IACf,sBAAsB;IACtB,YAAY;IACZ,gBAAgB;IAChB,cAAc;IACd,YAAY;IACZ,UAAU;IACV,aAAa;IACb,aAAa;IACb,WAAW;IACX,cAAc;IACd,kBAAkB;IAClB,oBAAoB;IACpB,aAAa;IACb,gBAAgB;IAChB,cAAc;IACd,WAAW;IACX,mBAAmB;IACnB,eAAe;IACf,cAAc;IACd,YAAY;IACZ,YAAY;AACd;AAEA,MAAM,QAA4B;IAChC,SAAS;IACT,IAAI;AACN;AAEO,MAAM,IAAI,CAAC,MAAY,MAAwB,KAAK,CAAC,KAAK,CAAC,IAAI,IAAI;AAEnE,MAAM,WAAW,CAAC,MAAY;IACnC,IAAI,QAAQ,eAAe;QACzB,OAAO,EAAE,MAAM;IACjB;IACA,OAAO,EAAE,MAAM;AACjB;AAEO,MAAM,YAAY,CAAC,MAAY;IACpC,IAAI,SAAS,eAAe;QAC1B,OAAO,EAAE,MAAM;IACjB;IACA,IAAI,SAAS,aAAa;QACxB,OAAO,EAAE,MAAM;IACjB;IACA,OAAO,EAAE,MAAM;AACjB;AAEO,MAAM,aAAa,CAAC,MAAY;IACrC,IAAI,UAAU,gBAAgB;QAC5B,OAAO,EAAE,MAAM;IACjB;IACA,IAAI,UAAU,YAAY;QACxB,OAAO,EAAE,MAAM;IACjB;IACA,IAAI,UAAU,WAAW;QACvB,OAAO,EAAE,MAAM;IACjB;IACA,IAAI,UAAU,SAAS;QACrB,OAAO,EAAE,MAAM;IACjB;IACA,IAAI,UAAU,SAAS;QACrB,OAAO,EAAE,MAAM;IACjB;IACA,OAAO,EAAE,MAAM;AACjB"}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/lib/openspec-parser.ts"],"sourcesContent":["import {\n  ChangeItem,\n  OverviewStats,\n  ParsedProject,\n  ProjectFile,\n  SpecItem,\n  SpecSummary,\n  TaskSummary,\n} from \"@/lib/types\";\n\nconst normalize = (path: string) => path.replaceAll(\"\\\\\", \"/\");\n\nconst buildTaskSummary = (content?: string): TaskSummary => {\n  if (!content) {\n    return { done: 0, total: 0 };\n  }\n  const lines = content.split(\"\\n\");\n  const total = lines.filter((line) => /^- \\[[xX\\s]\\]/.test(line)).length;\n  const done = lines.filter((line) => /^- \\[[xX]\\]/.test(line)).length;\n  return { done, total };\n};\n\nconst buildSpecSummary = (content?: string): SpecSummary => {\n  if (!content) {\n    return { added: 0, modified: 0, removed: 0 };\n  }\n  const lines = content.split(\"\\n\");\n  const added = lines.filter((line) => /^##\\s+ADDED Requirements/.test(line)).length;\n  const modified = lines.filter((line) => /^##\\s+MODIFIED Requirements/.test(line)).length;\n  const removed = lines.filter((line) => /^##\\s+REMOVED Requirements/.test(line)).length;\n  return { added, modified, removed };\n};\n\nconst getFile = (files: Record<string, ProjectFile>, targetPath: string): ProjectFile | undefined =>\n  Object.values(files).find((file) => normalize(file.path) === normalize(targetPath));\n\nconst collectByPrefix = (files: Record<string, ProjectFile>, prefix: string): ProjectFile[] =>\n  Object.values(files).filter((file) => normalize(file.path).startsWith(normalize(prefix)));\n\nconst uniqueChangeRoots = (files: Record<string, ProjectFile>, prefix: string): string[] => {\n  const roots = new Set<string>();\n  Object.values(files).forEach((file) => {\n    const normalizedPath = normalize(file.path);\n    if (!normalizedPath.startsWith(prefix)) {\n      return;\n    }\n    const tail = normalizedPath.slice(prefix.length);\n    const [change] = tail.split(\"/\");\n    if (change && !change.startsWith(\".\")) {\n      roots.add(change);\n    }\n  });\n  return [...roots].sort();\n};\n\nconst buildChangeItem = (\n  files: Record<string, ProjectFile>,\n  category: \"in-progress\" | \"archived\",\n  changeName: string\n): ChangeItem => {\n  const basePath =\n    category === \"archived\"\n      ? `openspec/changes/archive/${changeName}`\n      : `openspec/changes/${changeName}`;\n\n  const proposal = getFile(files, `${basePath}/proposal.md`)?.content;\n  const design = getFile(files, `${basePath}/design.md`)?.content;\n  const tasks = getFile(files, `${basePath}/tasks.md`)?.content;\n\n  const specFiles = collectByPrefix(files, `${basePath}/specs/`)\n    .filter((file) => file.path.endsWith(\".md\"))\n    .map((file) => file.content)\n    .join(\"\\n\\n\");\n\n  const relatedFiles = collectByPrefix(files, `${basePath}/`);\n  const updatedAt =\n    relatedFiles.length > 0\n      ? Math.max(...relatedFiles.map((file) => file.lastModified))\n      : Date.now();\n\n  return {\n    name: changeName,\n    category,\n    proposal,\n    design,\n    tasks,\n    specs: specFiles || undefined,\n    updatedAt,\n    taskSummary: buildTaskSummary(tasks),\n    specSummary: buildSpecSummary(specFiles),\n  };\n};\n\nconst buildSpecs = (files: Record<string, ProjectFile>): SpecItem[] =>\n  Object.values(files)\n    .filter(\n      (file) =>\n        normalize(file.path).startsWith(\"openspec/specs/\") &&\n        normalize(file.path).endsWith(\"/spec.md\")\n    )\n    .map((file) => {\n      const normalizedPath = normalize(file.path);\n      const chunks = normalizedPath.split(\"/\");\n      const name = chunks[chunks.length - 2] ?? normalizedPath;\n      return {\n        name,\n        path: normalizedPath,\n        content: file.content,\n        updatedAt: file.lastModified,\n      };\n    })\n    .sort((left, right) => left.name.localeCompare(right.name));\n\nconst buildStats = (\n  inProgress: ChangeItem[],\n  archived: ChangeItem[],\n  specs: SpecItem[],\n  staleDays: number\n): OverviewStats => {\n  const thresholdMs = staleDays * 24 * 60 * 60 * 1000;\n  const now = Date.now();\n  const stalled = inProgress.filter((item) => now - item.updatedAt > thresholdMs).length;\n  return {\n    inProgress: inProgress.length,\n    specs: specs.length,\n    archived: archived.length,\n    stalled,\n  };\n};\n\nexport const parseOpenSpecProject = (\n  files: Record<string, ProjectFile>,\n  staleDays: number\n): ParsedProject => {\n  const inProgressNames = uniqueChangeRoots(files, \"openspec/changes/\").filter(\n    (name) => name !== \"archive\"\n  );\n  const archivedNames = uniqueChangeRoots(files, \"openspec/changes/archive/\");\n\n  const inProgress = inProgressNames.map((name) =>\n    buildChangeItem(files, \"in-progress\", name)\n  );\n  const archived = archivedNames.map((name) => buildChangeItem(files, \"archived\", name));\n  const specs = buildSpecs(files);\n\n  const configFile = getFile(files, \"openspec/config.yaml\");\n\n  return {\n    configPath: configFile ? \"openspec/config.yaml\" : null,\n    configContent: configFile?.content ?? \"\",\n    configUpdatedAt: configFile?.lastModified ?? Date.now(),\n    inProgress,\n    archived,\n    specs,\n    stats: buildStats(inProgress, archived, specs, staleDays),\n  };\n};\n\nexport const summarizeTasks = buildTaskSummary;\nexport const summarizeSpecs = buildSpecSummary;\n"],"names":[],"mappings":";;;;;;;;AAUA,MAAM,YAAY,CAAC,OAAiB,KAAK,UAAU,CAAC,MAAM;AAE1D,MAAM,mBAAmB,CAAC;IACxB,IAAI,CAAC,SAAS;QACZ,OAAO;YAAE,MAAM;YAAG,OAAO;QAAE;IAC7B;IACA,MAAM,QAAQ,QAAQ,KAAK,CAAC;IAC5B,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,OAAS,gBAAgB,IAAI,CAAC,OAAO,MAAM;IACvE,MAAM,OAAO,MAAM,MAAM,CAAC,CAAC,OAAS,cAAc,IAAI,CAAC,OAAO,MAAM;IACpE,OAAO;QAAE;QAAM;IAAM;AACvB;AAEA,MAAM,mBAAmB,CAAC;IACxB,IAAI,CAAC,SAAS;QACZ,OAAO;YAAE,OAAO;YAAG,UAAU;YAAG,SAAS;QAAE;IAC7C;IACA,MAAM,QAAQ,QAAQ,KAAK,CAAC;IAC5B,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,OAAS,2BAA2B,IAAI,CAAC,OAAO,MAAM;IAClF,MAAM,WAAW,MAAM,MAAM,CAAC,CAAC,OAAS,8BAA8B,IAAI,CAAC,OAAO,MAAM;IACxF,MAAM,UAAU,MAAM,MAAM,CAAC,CAAC,OAAS,6BAA6B,IAAI,CAAC,OAAO,MAAM;IACtF,OAAO;QAAE;QAAO;QAAU;IAAQ;AACpC;AAEA,MAAM,UAAU,CAAC,OAAoC,aACnD,OAAO,MAAM,CAAC,OAAO,IAAI,CAAC,CAAC,OAAS,UAAU,KAAK,IAAI,MAAM,UAAU;AAEzE,MAAM,kBAAkB,CAAC,OAAoC,SAC3D,OAAO,MAAM,CAAC,OAAO,MAAM,CAAC,CAAC,OAAS,UAAU,KAAK,IAAI,EAAE,UAAU,CAAC,UAAU;AAElF,MAAM,oBAAoB,CAAC,OAAoC;IAC7D,MAAM,QAAQ,IAAI;IAClB,OAAO,MAAM,CAAC,OAAO,OAAO,CAAC,CAAC;QAC5B,MAAM,iBAAiB,UAAU,KAAK,IAAI;QAC1C,IAAI,CAAC,eAAe,UAAU,CAAC,SAAS;YACtC;QACF;QACA,MAAM,OAAO,eAAe,KAAK,CAAC,OAAO,MAAM;QAC/C,MAAM,CAAC,OAAO,GAAG,KAAK,KAAK,CAAC;QAC5B,IAAI,UAAU,CAAC,OAAO,UAAU,CAAC,MAAM;YACrC,MAAM,GAAG,CAAC;QACZ;IACF;IACA,OAAO;WAAI;KAAM,CAAC,IAAI;AACxB;AAEA,MAAM,kBAAkB,CACtB,OACA,UACA;IAEA,MAAM,WACJ,aAAa,aACT,CAAC,yBAAyB,EAAE,YAAY,GACxC,CAAC,iBAAiB,EAAE,YAAY;IAEtC,MAAM,WAAW,QAAQ,OAAO,GAAG,SAAS,YAAY,CAAC,GAAG;IAC5D,MAAM,SAAS,QAAQ,OAAO,GAAG,SAAS,UAAU,CAAC,GAAG;IACxD,MAAM,QAAQ,QAAQ,OAAO,GAAG,SAAS,SAAS,CAAC,GAAG;IAEtD,MAAM,YAAY,gBAAgB,OAAO,GAAG,SAAS,OAAO,CAAC,EAC1D,MAAM,CAAC,CAAC,OAAS,KAAK,IAAI,CAAC,QAAQ,CAAC,QACpC,GAAG,CAAC,CAAC,OAAS,KAAK,OAAO,EAC1B,IAAI,CAAC;IAER,MAAM,eAAe,gBAAgB,OAAO,GAAG,SAAS,CAAC,CAAC;IAC1D,MAAM,YACJ,aAAa,MAAM,GAAG,IAClB,KAAK,GAAG,IAAI,aAAa,GAAG,CAAC,CAAC,OAAS,KAAK,YAAY,KACxD,KAAK,GAAG;IAEd,OAAO;QACL,MAAM;QACN;QACA;QACA;QACA;QACA,OAAO,aAAa;QACpB;QACA,aAAa,iBAAiB;QAC9B,aAAa,iBAAiB;IAChC;AACF;AAEA,MAAM,aAAa,CAAC,QAClB,OAAO,MAAM,CAAC,OACX,MAAM,CACL,CAAC,OACC,UAAU,KAAK,IAAI,EAAE,UAAU,CAAC,sBAChC,UAAU,KAAK,IAAI,EAAE,QAAQ,CAAC,aAEjC,GAAG,CAAC,CAAC;QACJ,MAAM,iBAAiB,UAAU,KAAK,IAAI;QAC1C,MAAM,SAAS,eAAe,KAAK,CAAC;QACpC,MAAM,OAAO,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE,IAAI;QAC1C,OAAO;YACL;YACA,MAAM;YACN,SAAS,KAAK,OAAO;YACrB,WAAW,KAAK,YAAY;QAC9B;IACF,GACC,IAAI,CAAC,CAAC,MAAM,QAAU,KAAK,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI;AAE7D,MAAM,aAAa,CACjB,YACA,UACA,OACA;IAEA,MAAM,cAAc,YAAY,KAAK,KAAK,KAAK;IAC/C,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,UAAU,WAAW,MAAM,CAAC,CAAC,OAAS,MAAM,KAAK,SAAS,GAAG,aAAa,MAAM;IACtF,OAAO;QACL,YAAY,WAAW,MAAM;QAC7B,OAAO,MAAM,MAAM;QACnB,UAAU,SAAS,MAAM;QACzB;IACF;AACF;AAEO,MAAM,uBAAuB,CAClC,OACA;IAEA,MAAM,kBAAkB,kBAAkB,OAAO,qBAAqB,MAAM,CAC1E,CAAC,OAAS,SAAS;IAErB,MAAM,gBAAgB,kBAAkB,OAAO;IAE/C,MAAM,aAAa,gBAAgB,GAAG,CAAC,CAAC,OACtC,gBAAgB,OAAO,eAAe;IAExC,MAAM,WAAW,cAAc,GAAG,CAAC,CAAC,OAAS,gBAAgB,OAAO,YAAY;IAChF,MAAM,QAAQ,WAAW;IAEzB,MAAM,aAAa,QAAQ,OAAO;IAElC,OAAO;QACL,YAAY,aAAa,yBAAyB;QAClD,eAAe,YAAY,WAAW;QACtC,iBAAiB,YAAY,gBAAgB,KAAK,GAAG;QACrD;QACA;QACA;QACA,OAAO,WAAW,YAAY,UAAU,OAAO;IACjD;AACF;AAEO,MAAM,iBAAiB;AACvB,MAAM,iBAAiB"}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/lib/storage.ts"],"sourcesContent":["import { del, get, set } from \"idb-keyval\";\nimport {\n  AppPreferences,\n  BackupRecord,\n  DeleteLogRecord,\n  ProjectSnapshot,\n  RecentProject,\n} from \"@/lib/types\";\n\nconst PREFS_KEY = \"opsx.preferences.v1\";\nconst RECENT_KEY = \"opsx.recent.v1\";\nconst BACKUPS_KEY = \"opsx.backups.v1\";\nconst DELETE_LOGS_KEY = \"opsx.delete.logs.v1\";\n\nexport const defaultPreferences: AppPreferences = {\n  language: \"zh-TW\",\n  theme: \"dark\",\n  staleDays: 14,\n  backupRetentionDays: 30,\n};\n\nconst readJson = <T>(key: string, fallback: T): T => {\n  if (typeof window === \"undefined\") {\n    return fallback;\n  }\n  const raw = window.localStorage.getItem(key);\n  if (!raw) {\n    return fallback;\n  }\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return fallback;\n  }\n};\n\nconst writeJson = (key: string, value: unknown) => {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n  window.localStorage.setItem(key, JSON.stringify(value));\n};\n\nexport const loadPreferences = (): AppPreferences => ({\n  ...defaultPreferences,\n  ...readJson<AppPreferences>(PREFS_KEY, defaultPreferences),\n});\n\nexport const savePreferences = (preferences: AppPreferences) => {\n  writeJson(PREFS_KEY, preferences);\n};\n\nexport const loadRecentProjects = (): RecentProject[] =>\n  readJson<RecentProject[]>(RECENT_KEY, []);\n\nexport const saveRecentProjects = (projects: RecentProject[]) => {\n  writeJson(RECENT_KEY, projects.slice(0, 8));\n};\n\nexport const putSnapshot = async (snapshot: ProjectSnapshot) => {\n  await set(snapshot.id, snapshot);\n};\n\nexport const getSnapshot = async (id: string): Promise<ProjectSnapshot | undefined> =>\n  (await get(id)) as ProjectSnapshot | undefined;\n\nexport const deleteSnapshot = async (id: string) => {\n  await del(id);\n};\n\nexport const loadBackups = (): BackupRecord[] => readJson<BackupRecord[]>(BACKUPS_KEY, []);\n\nexport const saveBackups = (records: BackupRecord[]) => writeJson(BACKUPS_KEY, records);\n\nexport const loadDeleteLogs = (): DeleteLogRecord[] =>\n  readJson<DeleteLogRecord[]>(DELETE_LOGS_KEY, []);\n\nexport const saveDeleteLogs = (records: DeleteLogRecord[]) =>\n  writeJson(DELETE_LOGS_KEY, records);\n\nexport const cleanupExpiredBackups = (retentionDays: number): BackupRecord[] => {\n  const now = Date.now();\n  const maxAge = retentionDays * 24 * 60 * 60 * 1000;\n  const backups = loadBackups();\n  const logs = loadDeleteLogs();\n\n  const kept = backups.filter((backup) => now - backup.deletedAt <= maxAge);\n  if (kept.length !== backups.length) {\n    saveBackups(kept);\n    saveDeleteLogs(\n      logs.filter((entry) => now - entry.deletedAt <= maxAge)\n    );\n  }\n  return kept;\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AASA,MAAM,YAAY;AAClB,MAAM,aAAa;AACnB,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,qBAAqC;IAChD,UAAU;IACV,OAAO;IACP,WAAW;IACX,qBAAqB;AACvB;AAEA,MAAM,WAAW,CAAI,KAAa;IAChC;;IAGA,MAAM,MAAM,OAAO,YAAY,CAAC,OAAO,CAAC;IACxC,IAAI,CAAC,KAAK;QACR,OAAO;IACT;IACA,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,MAAM,YAAY,CAAC,KAAa;IAC9B;;IAGA,OAAO,YAAY,CAAC,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAClD;AAEO,MAAM,kBAAkB,IAAsB,CAAC;QACpD,GAAG,kBAAkB;QACrB,GAAG,SAAyB,WAAW,mBAAmB;IAC5D,CAAC;AAEM,MAAM,kBAAkB,CAAC;IAC9B,UAAU,WAAW;AACvB;AAEO,MAAM,qBAAqB,IAChC,SAA0B,YAAY,EAAE;AAEnC,MAAM,qBAAqB,CAAC;IACjC,UAAU,YAAY,SAAS,KAAK,CAAC,GAAG;AAC1C;AAEO,MAAM,cAAc,OAAO;IAChC,MAAM,IAAA,wJAAG,EAAC,SAAS,EAAE,EAAE;AACzB;AAEO,MAAM,cAAc,OAAO,KAC/B,MAAM,IAAA,wJAAG,EAAC;AAEN,MAAM,iBAAiB,OAAO;IACnC,MAAM,IAAA,wJAAG,EAAC;AACZ;AAEO,MAAM,cAAc,IAAsB,SAAyB,aAAa,EAAE;AAElF,MAAM,cAAc,CAAC,UAA4B,UAAU,aAAa;AAExE,MAAM,iBAAiB,IAC5B,SAA4B,iBAAiB,EAAE;AAE1C,MAAM,iBAAiB,CAAC,UAC7B,UAAU,iBAAiB;AAEtB,MAAM,wBAAwB,CAAC;IACpC,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,SAAS,gBAAgB,KAAK,KAAK,KAAK;IAC9C,MAAM,UAAU;IAChB,MAAM,OAAO;IAEb,MAAM,OAAO,QAAQ,MAAM,CAAC,CAAC,SAAW,MAAM,OAAO,SAAS,IAAI;IAClE,IAAI,KAAK,MAAM,KAAK,QAAQ,MAAM,EAAE;QAClC,YAAY;QACZ,eACE,KAAK,MAAM,CAAC,CAAC,QAAU,MAAM,MAAM,SAAS,IAAI;IAEpD;IACA,OAAO;AACT"}},
    {"offset": {"line": 852, "column": 0}, "map": {"version":3,"sources":["file:///Users/turnps/Desktop/AI/demo4/web/components/dashboard-page.tsx"],"sourcesContent":["\"use client\";\n\nimport { ChangeEvent, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport YAML from \"yaml\";\nimport MarkdownView from \"@/components/markdown-view\";\nimport { detectBrowserMode, isFileSystemAccessSupported } from \"@/lib/browser-mode\";\nimport { validateConfigYaml } from \"@/lib/config-validation\";\nimport {\n  deleteChangeDirectory,\n  importReadonlyProject,\n  openDirectoryProject,\n  saveTextFile,\n} from \"@/lib/fs-access\";\nimport { modeLabel, stageLabel, t, tabLabel } from \"@/lib/i18n\";\nimport { parseOpenSpecProject } from \"@/lib/openspec-parser\";\nimport {\n  cleanupExpiredBackups,\n  defaultPreferences,\n  getSnapshot,\n  loadBackups,\n  loadDeleteLogs,\n  loadPreferences,\n  loadRecentProjects,\n  putSnapshot,\n  saveBackups,\n  saveDeleteLogs,\n  savePreferences,\n  saveRecentProjects,\n} from \"@/lib/storage\";\nimport {\n  AppPreferences,\n  BrowserMode,\n  ChangeItem,\n  LoadProgressEvent,\n  MainTab,\n  ParsedProject,\n  ProjectFile,\n  ProjectLoadState,\n  ProjectSnapshot,\n  RecentProject,\n  SpecItem,\n} from \"@/lib/types\";\n\nconst TABS: MainTab[] = [\"overview\", \"in-progress\", \"specs\", \"archived\"];\n\nconst normalize = (path: string) => path.replaceAll(\"\\\\\", \"/\");\n\nconst toRecent = (snapshot: ProjectSnapshot): RecentProject => ({\n  id: snapshot.id,\n  name: snapshot.name,\n  type: snapshot.type,\n  openedAt: snapshot.openedAt,\n});\n\nconst upsertRecent = (current: RecentProject[], snapshot: ProjectSnapshot): RecentProject[] => {\n  const filtered = current.filter((item) => item.id !== snapshot.id);\n  return [toRecent(snapshot), ...filtered].sort((a, b) => b.openedAt - a.openedAt).slice(0, 8);\n};\n\nconst getConfigPath = (snapshot: ProjectSnapshot): string => {\n  const configPath = Object.keys(snapshot.files).find(\n    (path) => normalize(path) === \"openspec/config.yaml\"\n  );\n  return configPath ?? \"openspec/config.yaml\";\n};\n\nconst applyTheme = (theme: AppPreferences[\"theme\"]) => {\n  if (typeof document === \"undefined\") {\n    return;\n  }\n  document.documentElement.dataset.theme = theme;\n};\n\nconst extractConfigNumbers = (configText: string) => {\n  try {\n    const parsed = YAML.parse(configText) as Record<string, unknown>;\n    return {\n      staleDays: typeof parsed.staleDays === \"number\" ? parsed.staleDays : null,\n      backupRetentionDays:\n        typeof parsed.backupRetentionDays === \"number\" ? parsed.backupRetentionDays : null,\n    };\n  } catch {\n    return { staleDays: null, backupRetentionDays: null };\n  }\n};\n\nconst INITIAL_LOAD_STATE: ProjectLoadState = {\n  stage: \"idle\",\n  progressPercent: 0,\n  message: \"\",\n};\n\nconst applyProgressEvent = (\n  current: ProjectLoadState,\n  event: LoadProgressEvent\n): ProjectLoadState => {\n  const nextPercent = Math.max(current.progressPercent, event.progressPercent);\n  return {\n    stage: event.stage,\n    progressPercent: Math.min(100, Math.max(0, nextPercent)),\n    message: event.message,\n  };\n};\n\nconst formatOpenedAt = (timestamp: number, lang: AppPreferences[\"language\"]): string => {\n  if (!Number.isFinite(timestamp)) {\n    return \"-\";\n  }\n\n  return new Date(timestamp).toLocaleString(lang === \"zh-TW\" ? \"zh-TW\" : \"en-US\", {\n    hour12: false,\n  });\n};\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const importRef = useRef<HTMLInputElement>(null);\n  const resetLoadRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const [prefs, setPrefs] = useState<AppPreferences>(defaultPreferences);\n  const [mode, setMode] = useState<BrowserMode>(\"fallback-readonly\");\n  const [recentProjects, setRecentProjects] = useState<RecentProject[]>([]);\n  const [snapshot, setSnapshot] = useState<ProjectSnapshot | null>(null);\n  const [parsed, setParsed] = useState<ParsedProject | null>(null);\n  const [configDraft, setConfigDraft] = useState(\"\");\n  const [saveMessage, setSaveMessage] = useState(\"\");\n  const [loadState, setLoadState] = useState<ProjectLoadState>(INITIAL_LOAD_STATE);\n\n  const [selectedSpec, setSelectedSpec] = useState<string>(\"\");\n  const [selectedInProgress, setSelectedInProgress] = useState<string>(\"\");\n  const [selectedArchived, setSelectedArchived] = useState<string>(\"\");\n  const [inProgressDetailTab, setInProgressDetailTab] = useState<\"tasks\" | \"proposal\">(\"tasks\");\n  const [archivedDetailTab, setArchivedDetailTab] = useState<\n    \"proposal\" | \"design\" | \"tasks\" | \"specs\"\n  >(\"proposal\");\n\n  useEffect(() => {\n    const nextMode = detectBrowserMode();\n    setMode(nextMode);\n    const nextPrefs = loadPreferences();\n    setPrefs(nextPrefs);\n    applyTheme(nextPrefs.theme);\n    setRecentProjects(loadRecentProjects());\n    cleanupExpiredBackups(nextPrefs.backupRetentionDays);\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (resetLoadRef.current) {\n        clearTimeout(resetLoadRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    savePreferences(prefs);\n    applyTheme(prefs.theme);\n    cleanupExpiredBackups(prefs.backupRetentionDays);\n  }, [prefs]);\n\n  useEffect(() => {\n    if (!snapshot) {\n      setParsed(null);\n      setConfigDraft(\"\");\n      return;\n    }\n\n    const nextParsed = parseOpenSpecProject(snapshot.files, prefs.staleDays);\n    setParsed(nextParsed);\n    setConfigDraft(nextParsed.configContent);\n\n    setSelectedSpec((current) => {\n      if (current && nextParsed.specs.some((item) => item.name === current)) {\n        return current;\n      }\n      return nextParsed.specs[0]?.name ?? \"\";\n    });\n\n    setSelectedInProgress((current) => {\n      if (current && nextParsed.inProgress.some((item) => item.name === current)) {\n        return current;\n      }\n      return nextParsed.inProgress[0]?.name ?? \"\";\n    });\n\n    setSelectedArchived((current) => {\n      if (current && nextParsed.archived.some((item) => item.name === current)) {\n        return current;\n      }\n      return nextParsed.archived[0]?.name ?? \"\";\n    });\n  }, [snapshot, prefs.staleDays]);\n\n  const lang = prefs.language;\n\n  const activeTab = useMemo<MainTab>(() => {\n    const value = searchParams.get(\"tab\") as MainTab | null;\n    return value && TABS.includes(value) ? value : \"overview\";\n  }, [searchParams]);\n\n  const setTab = (tab: MainTab) => {\n    const params = new URLSearchParams(searchParams.toString());\n    params.set(\"tab\", tab);\n    router.replace(`/?${params.toString()}`);\n  };\n\n  const startLoad = (message: string) => {\n    if (resetLoadRef.current) {\n      clearTimeout(resetLoadRef.current);\n      resetLoadRef.current = null;\n    }\n    setLoadState({ stage: \"initializing\", progressPercent: 5, message });\n  };\n\n  const completeLoad = (message: string) => {\n    setLoadState({ stage: \"ready\", progressPercent: 100, message });\n    resetLoadRef.current = setTimeout(() => {\n      setLoadState(INITIAL_LOAD_STATE);\n    }, 1500);\n  };\n\n  const failLoad = (errorMessage: string) => {\n    setLoadState({\n      stage: \"error\",\n      progressPercent: 100,\n      message: errorMessage,\n      error: errorMessage,\n    });\n  };\n\n  const onProgress = (event: LoadProgressEvent) => {\n    setLoadState((current) => applyProgressEvent(current, event));\n  };\n\n  const updateSnapshot = async (nextSnapshot: ProjectSnapshot) => {\n    setSnapshot(nextSnapshot);\n    await putSnapshot(nextSnapshot);\n\n    setRecentProjects((current) => {\n      const next = upsertRecent(current, nextSnapshot);\n      saveRecentProjects(next);\n      return next;\n    });\n  };\n\n  const openProject = async () => {\n    startLoad(\"open:start\");\n\n    try {\n      if (!isFileSystemAccessSupported()) {\n        failLoad(`${t(lang, \"openFailed\")}: showDirectoryPicker unsupported`);\n        return;\n      }\n\n      const next = await openDirectoryProject(onProgress);\n      if (\n        !next.files[\"openspec/config.yaml\"] &&\n        !Object.keys(next.files).some((file) => file.startsWith(\"openspec/\"))\n      ) {\n        failLoad(t(lang, \"invalidProject\"));\n        return;\n      }\n\n      setLoadState((current) =>\n        applyProgressEvent(current, {\n          stage: \"parsing\",\n          progressPercent: 92,\n          message: \"open:finalize\",\n        })\n      );\n\n      await updateSnapshot(next);\n      completeLoad(\"open:ready\");\n    } catch (error) {\n      failLoad(`${t(lang, \"openFailed\")}: ${error instanceof Error ? error.message : \"unknown\"}`);\n    }\n  };\n\n  const importProject = async (event: ChangeEvent<HTMLInputElement>) => {\n    const fileList = event.target.files;\n    if (!fileList || fileList.length === 0) {\n      return;\n    }\n\n    startLoad(\"import:start\");\n\n    try {\n      const next = await importReadonlyProject(fileList, onProgress);\n      await updateSnapshot(next);\n      completeLoad(\"import:ready\");\n    } catch (error) {\n      failLoad(`${t(lang, \"openFailed\")}: ${error instanceof Error ? error.message : \"unknown\"}`);\n    } finally {\n      event.target.value = \"\";\n    }\n  };\n\n  const loadRecentProject = async (recent: RecentProject) => {\n    startLoad(\"recent:start\");\n\n    const loaded = await getSnapshot(recent.id);\n    if (!loaded) {\n      failLoad(`${t(lang, \"openFailed\")}: snapshot not found`);\n      return;\n    }\n\n    setLoadState((current) =>\n      applyProgressEvent(current, {\n        stage: \"parsing\",\n        progressPercent: 85,\n        message: \"recent:parsing\",\n      })\n    );\n\n    await updateSnapshot({ ...loaded, openedAt: Date.now() });\n    completeLoad(\"recent:ready\");\n  };\n\n  const handleConfigSave = async () => {\n    if (!snapshot || !parsed) {\n      return;\n    }\n\n    const validation = validateConfigYaml(configDraft);\n    if (!validation.valid) {\n      return;\n    }\n\n    if (!snapshot.writable || !snapshot.rootHandle) {\n      alert(t(lang, \"readonlyHint\"));\n      return;\n    }\n\n    const configPath = getConfigPath(snapshot);\n\n    await saveTextFile(snapshot.rootHandle, configPath, configDraft);\n\n    const updatedFiles: Record<string, ProjectFile> = {\n      ...snapshot.files,\n      [normalize(configPath)]: {\n        path: normalize(configPath),\n        content: configDraft,\n        lastModified: Date.now(),\n      },\n    };\n\n    const nextSnapshot: ProjectSnapshot = {\n      ...snapshot,\n      files: updatedFiles,\n      openedAt: Date.now(),\n    };\n\n    const extracted = extractConfigNumbers(configDraft);\n    setPrefs((current) => ({\n      ...current,\n      staleDays: extracted.staleDays ?? current.staleDays,\n      backupRetentionDays: extracted.backupRetentionDays ?? current.backupRetentionDays,\n    }));\n\n    await updateSnapshot(nextSnapshot);\n    setSaveMessage(t(lang, \"configSaved\"));\n    setTimeout(() => setSaveMessage(\"\"), 1800);\n  };\n\n  const deleteChange = async (category: \"in-progress\" | \"archived\", name: string) => {\n    if (!snapshot) {\n      return;\n    }\n    if (!snapshot.writable || !snapshot.rootHandle) {\n      alert(t(lang, \"cannotDeleteReadonly\"));\n      return;\n    }\n\n    const confirmed = window.confirm(t(lang, \"confirmDelete\"));\n    if (!confirmed) {\n      return;\n    }\n\n    const basePath =\n      category === \"archived\" ? `openspec/changes/archive/${name}/` : `openspec/changes/${name}/`;\n\n    const files = Object.values(snapshot.files).filter((file) =>\n      normalize(file.path).startsWith(basePath)\n    );\n\n    const backupRecord = {\n      id: `${name}-${Date.now()}`,\n      path: basePath,\n      deletedAt: Date.now(),\n      files,\n    };\n\n    const deleteLog = {\n      id: `log-${Date.now()}`,\n      path: basePath,\n      deletedAt: Date.now(),\n      projectId: snapshot.id,\n    };\n\n    const backups = loadBackups();\n    const logs = loadDeleteLogs();\n    saveBackups([backupRecord, ...backups]);\n    saveDeleteLogs([deleteLog, ...logs]);\n    cleanupExpiredBackups(prefs.backupRetentionDays);\n\n    await deleteChangeDirectory(snapshot.rootHandle, category, name);\n\n    const nextFiles: Record<string, ProjectFile> = { ...snapshot.files };\n    for (const file of files) {\n      delete nextFiles[file.path];\n    }\n\n    const nextSnapshot = {\n      ...snapshot,\n      files: nextFiles,\n      openedAt: Date.now(),\n    };\n\n    await updateSnapshot(nextSnapshot);\n  };\n\n  const selectedSpecItem: SpecItem | undefined = parsed?.specs.find((item) => item.name === selectedSpec);\n  const selectedInProgressItem: ChangeItem | undefined = parsed?.inProgress.find(\n    (item) => item.name === selectedInProgress\n  );\n  const selectedArchivedItem: ChangeItem | undefined = parsed?.archived.find(\n    (item) => item.name === selectedArchived\n  );\n\n  const configValidation = validateConfigYaml(configDraft);\n\n  return (\n    <div className=\"shell\">\n      <header className=\"header\">\n        <h1>{t(lang, \"appTitle\")}</h1>\n\n        <div className=\"toolbar\">\n          <button type=\"button\" onClick={openProject}>\n            {t(lang, \"openProject\")}\n          </button>\n\n          <button type=\"button\" onClick={() => importRef.current?.click()}>\n            {t(lang, \"importReadonly\")}\n          </button>\n\n          <input\n            ref={importRef}\n            type=\"file\"\n            multiple\n            className=\"hidden\"\n            onChange={importProject}\n            // @ts-expect-error webkitdirectory is browser-specific\n            webkitdirectory=\"\"\n          />\n\n          <label>\n            {t(lang, \"language\")}\n            <select\n              value={lang}\n              onChange={(event) =>\n                setPrefs((current) => ({\n                  ...current,\n                  language: event.target.value as AppPreferences[\"language\"],\n                }))\n              }\n            >\n              <option value=\"zh-TW\">繁體中文</option>\n              <option value=\"en\">English</option>\n            </select>\n          </label>\n\n          <label>\n            {t(lang, \"theme\")}\n            <select\n              value={prefs.theme}\n              onChange={(event) =>\n                setPrefs((current) => ({\n                  ...current,\n                  theme: event.target.value as AppPreferences[\"theme\"],\n                }))\n              }\n            >\n              <option value=\"dark\">{t(lang, \"dark\")}</option>\n              <option value=\"light\">{t(lang, \"light\")}</option>\n            </select>\n          </label>\n\n          <span className=\"mode-badge\">\n            {t(lang, \"mode\")}: {modeLabel(lang, mode)}\n          </span>\n        </div>\n      </header>\n\n      <section className=\"active-project\" data-testid=\"active-project-banner\">\n        <div>\n          <strong>{t(lang, \"currentProject\")}</strong>\n          <p>{snapshot ? snapshot.name : t(lang, \"noActiveProject\")}</p>\n        </div>\n        {snapshot && (\n          <div className=\"active-project-meta\">\n            <span>{modeLabel(lang, snapshot.mode)}</span>\n            <span>\n              {t(lang, \"openTime\")}: {formatOpenedAt(snapshot.openedAt, lang)}\n            </span>\n          </div>\n        )}\n      </section>\n\n      {loadState.stage !== \"idle\" && (\n        <section className={`load-progress ${loadState.stage}`} data-testid=\"load-progress\">\n          <div className=\"load-progress-header\">\n            <strong>{t(lang, \"loadProgress\")}</strong>\n            <span>\n              {stageLabel(lang, loadState.stage)} · {loadState.progressPercent}%\n            </span>\n          </div>\n          <div className=\"progress-track\">\n            <div\n              className=\"progress-fill\"\n              style={{ width: `${Math.min(100, Math.max(0, loadState.progressPercent))}%` }}\n            />\n          </div>\n          {loadState.error && <p className=\"progress-error\">{loadState.error}</p>}\n        </section>\n      )}\n\n      <section className=\"recent\">\n        <strong>{t(lang, \"recentProjects\")}</strong>\n        <div className=\"recent-list\">\n          {recentProjects.length === 0 ? (\n            <span className=\"muted\">{t(lang, \"noRecentProjects\")}</span>\n          ) : (\n            recentProjects.map((project) => (\n              <button\n                type=\"button\"\n                key={project.id}\n                className=\"recent-item\"\n                onClick={() => loadRecentProject(project)}\n              >\n                {project.name}\n              </button>\n            ))\n          )}\n        </div>\n      </section>\n\n      <nav className=\"tabs\" aria-label=\"main tabs\">\n        {TABS.map((tab) => (\n          <button\n            type=\"button\"\n            key={tab}\n            className={activeTab === tab ? \"tab active\" : \"tab\"}\n            onClick={() => setTab(tab)}\n          >\n            {tabLabel(lang, tab)}\n          </button>\n        ))}\n      </nav>\n\n      {!snapshot || !parsed ? (\n        <div className=\"empty\">Open or import an OpenSpec project to start.</div>\n      ) : (\n        <main className=\"content\">\n          {mode === \"fallback-readonly\" && <p className=\"warning\">{t(lang, \"readonlyHint\")}</p>}\n\n          {activeTab === \"overview\" && (\n            <section className=\"panel\">\n              <div className=\"cards-grid\">\n                <button className=\"stat-card\" onClick={() => setTab(\"in-progress\")}>\n                  <h3>{t(lang, \"inProgress\")}</h3>\n                  <p>{parsed.stats.inProgress}</p>\n                </button>\n                <button className=\"stat-card\" onClick={() => setTab(\"specs\")}>\n                  <h3>{t(lang, \"specs\")}</h3>\n                  <p>{parsed.stats.specs}</p>\n                </button>\n                <button className=\"stat-card\" onClick={() => setTab(\"archived\")}>\n                  <h3>{t(lang, \"archived\")}</h3>\n                  <p>{parsed.stats.archived}</p>\n                </button>\n                <div className=\"stat-card\">\n                  <h3>{t(lang, \"stalled\")}</h3>\n                  <p>{parsed.stats.stalled}</p>\n                </div>\n              </div>\n\n              <div className=\"controls-row\">\n                <label>\n                  {t(lang, \"staleDays\")}\n                  <input\n                    type=\"number\"\n                    min={1}\n                    value={prefs.staleDays}\n                    onChange={(event) =>\n                      setPrefs((current) => ({\n                        ...current,\n                        staleDays: Math.max(1, Number.parseInt(event.target.value, 10) || 1),\n                      }))\n                    }\n                  />\n                </label>\n\n                <label>\n                  {t(lang, \"backupRetentionDays\")}\n                  <input\n                    type=\"number\"\n                    min={1}\n                    value={prefs.backupRetentionDays}\n                    onChange={(event) =>\n                      setPrefs((current) => ({\n                        ...current,\n                        backupRetentionDays: Math.max(\n                          1,\n                          Number.parseInt(event.target.value, 10) || 1\n                        ),\n                      }))\n                    }\n                  />\n                </label>\n              </div>\n\n              <h3>{t(lang, \"configEditor\")}</h3>\n              <div className=\"editor-grid\">\n                <textarea\n                  value={configDraft}\n                  onChange={(event) => setConfigDraft(event.target.value)}\n                  spellCheck={false}\n                />\n                <div className=\"preview\">\n                  <MarkdownView content={`\\`\\`\\`yaml\\n${configDraft}\\n\\`\\`\\``} />\n                </div>\n              </div>\n\n              <div className=\"actions-row\">\n                <button\n                  type=\"button\"\n                  onClick={handleConfigSave}\n                  disabled={!configValidation.valid || !snapshot.writable}\n                >\n                  {t(lang, \"save\")}\n                </button>\n                {saveMessage && <span className=\"ok\">{saveMessage}</span>}\n              </div>\n\n              {configValidation.errors.length > 0 && (\n                <div className=\"validation\">\n                  <strong>{t(lang, \"validationErrors\")}</strong>\n                  <ul>\n                    {configValidation.errors.map((error) => (\n                      <li key={error}>{error}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {configValidation.lintHints.length > 0 && (\n                <div className=\"validation\">\n                  <strong>{t(lang, \"lintHints\")}</strong>\n                  <ul>\n                    {configValidation.lintHints.map((hint) => (\n                      <li key={hint}>{hint}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </section>\n          )}\n\n          {activeTab === \"specs\" && (\n            <section className=\"panel two-column\">\n              <div>\n                <h3>\n                  {t(lang, \"specs\")} ({parsed.specs.length})\n                </h3>\n                <ul className=\"list\">\n                  {parsed.specs.map((item) => (\n                    <li key={item.path}>\n                      <button\n                        className={selectedSpec === item.name ? \"list-button active\" : \"list-button\"}\n                        onClick={() => setSelectedSpec(item.name)}\n                      >\n                        {item.name}\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n\n              <div className=\"detail\">\n                {selectedSpecItem ? (\n                  <MarkdownView content={selectedSpecItem.content} />\n                ) : (\n                  <p className=\"muted\">{t(lang, \"selectItem\")}</p>\n                )}\n              </div>\n            </section>\n          )}\n\n          {activeTab === \"in-progress\" && (\n            <section className=\"panel two-column\">\n              <div>\n                <h3>\n                  {t(lang, \"inProgress\")} ({parsed.inProgress.length})\n                </h3>\n                <ul className=\"list\">\n                  {parsed.inProgress.map((item) => (\n                    <li key={item.name} className=\"list-row\">\n                      <button\n                        className={\n                          selectedInProgress === item.name ? \"list-button active\" : \"list-button\"\n                        }\n                        onClick={() => setSelectedInProgress(item.name)}\n                      >\n                        {item.name}\n                      </button>\n                      <button\n                        className=\"danger\"\n                        disabled={!snapshot.writable}\n                        onClick={() => deleteChange(\"in-progress\", item.name)}\n                      >\n                        {t(lang, \"delete\")}\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n\n              <div className=\"detail\">\n                {selectedInProgressItem ? (\n                  <>\n                    <div className=\"sub-tabs\">\n                      <button\n                        className={inProgressDetailTab === \"tasks\" ? \"tab active\" : \"tab\"}\n                        onClick={() => setInProgressDetailTab(\"tasks\")}\n                      >\n                        {t(lang, \"tasks\")} ({selectedInProgressItem.taskSummary.done}/\n                        {selectedInProgressItem.taskSummary.total})\n                      </button>\n                      <button\n                        className={inProgressDetailTab === \"proposal\" ? \"tab active\" : \"tab\"}\n                        onClick={() => setInProgressDetailTab(\"proposal\")}\n                      >\n                        {t(lang, \"proposal\")}\n                      </button>\n                    </div>\n\n                    <MarkdownView\n                      content={\n                        inProgressDetailTab === \"tasks\"\n                          ? selectedInProgressItem.tasks ?? \"\"\n                          : selectedInProgressItem.proposal ?? \"\"\n                      }\n                    />\n                  </>\n                ) : (\n                  <p className=\"muted\">{t(lang, \"selectItem\")}</p>\n                )}\n              </div>\n            </section>\n          )}\n\n          {activeTab === \"archived\" && (\n            <section className=\"panel two-column\">\n              <div>\n                <h3>\n                  {t(lang, \"archived\")} ({parsed.archived.length})\n                </h3>\n                <ul className=\"list\">\n                  {parsed.archived.map((item) => (\n                    <li key={item.name} className=\"list-row\">\n                      <button\n                        className={selectedArchived === item.name ? \"list-button active\" : \"list-button\"}\n                        onClick={() => setSelectedArchived(item.name)}\n                      >\n                        {item.name}\n                      </button>\n                      <button\n                        className=\"danger\"\n                        disabled={!snapshot.writable}\n                        onClick={() => deleteChange(\"archived\", item.name)}\n                      >\n                        {t(lang, \"delete\")}\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n\n              <div className=\"detail\">\n                {selectedArchivedItem ? (\n                  <>\n                    <div className=\"sub-tabs\">\n                      {([\"proposal\", \"design\", \"tasks\", \"specs\"] as const).map((tab) => (\n                        <button\n                          key={tab}\n                          className={archivedDetailTab === tab ? \"tab active\" : \"tab\"}\n                          onClick={() => setArchivedDetailTab(tab)}\n                        >\n                          {tab === \"proposal\" && t(lang, \"proposal\")}\n                          {tab === \"design\" && t(lang, \"design\")}\n                          {tab === \"tasks\" && (\n                            <>\n                              {t(lang, \"tasks\")} ({selectedArchivedItem.taskSummary.done}/\n                              {selectedArchivedItem.taskSummary.total})\n                            </>\n                          )}\n                          {tab === \"specs\" && (\n                            <>\n                              {t(lang, \"specs\")} (+{selectedArchivedItem.specSummary.added}/~\n                              {selectedArchivedItem.specSummary.modified}/-\n                              {selectedArchivedItem.specSummary.removed})\n                            </>\n                          )}\n                        </button>\n                      ))}\n                    </div>\n\n                    <MarkdownView\n                      content={\n                        archivedDetailTab === \"proposal\"\n                          ? selectedArchivedItem.proposal ?? \"\"\n                          : archivedDetailTab === \"design\"\n                            ? selectedArchivedItem.design ?? \"\"\n                            : archivedDetailTab === \"tasks\"\n                              ? selectedArchivedItem.tasks ?? \"\"\n                              : selectedArchivedItem.specs ?? \"\"\n                      }\n                    />\n                  </>\n                ) : (\n                  <p className=\"muted\">{t(lang, \"selectItem\")}</p>\n                )}\n              </div>\n            </section>\n          )}\n        </main>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}