## ADDED Requirements

### Requirement: 系統需偵測已開啟專案的檔案更新事件
系統 MUST 監聽已開啟專案中的 OpenSpec 關鍵檔案更新（`openspec/config.yaml`、`openspec/changes/**`、`openspec/specs/**`），並觸發同步流程。

#### Scenario: 關鍵檔案被外部更新
- **WHEN** 系統偵測到已開啟專案中的關鍵檔案內容或修改時間變更
- **THEN** 系統 SHALL 啟動資料重整流程

### Requirement: 系統需在偵測更新後自動刷新畫面資料
系統 SHALL 在資料重整完成後，自動更新統計數據、清單內容與細節內容，且不需使用者手動重新開啟專案。

#### Scenario: 更新後統計數值同步變更
- **WHEN** 進行中或已封存項目因檔案更新而改變
- **THEN** 系統 MUST 在同一次同步後更新總覽與頁籤數值

### Requirement: 自動刷新需保留使用者目前上下文
系統 MUST 在自動刷新後保留目前主頁籤、選取項目與細節分頁，除非原項目已不存在。

#### Scenario: 使用者正在閱讀規格細節時觸發刷新
- **WHEN** 系統於規格頁觸發自動刷新且原選取項目仍存在
- **THEN** 系統 SHALL 保持原頁籤與原選取項目不變

### Requirement: 系統需提供同步狀態回饋與失敗提示
系統 MUST 在偵測更新後顯示同步中、同步完成或同步失敗狀態；失敗時需附帶錯誤說明。

#### Scenario: 同步失敗
- **WHEN** 自動刷新流程發生讀取或解析錯誤
- **THEN** 系統 SHALL 顯示同步失敗提示並保留最近一次成功資料

### Requirement: 系統需限制高頻更新造成的重複重整
系統 MUST 對短時間內連續更新事件套用節流或去抖動策略，避免重整風暴。

#### Scenario: 短時間內多次檔案變更
- **WHEN** 系統在短時間收到多次檔案更新事件
- **THEN** 系統 SHALL 合併事件並以受控頻率執行刷新
